{% macro displayBlogs(blogs) %}


<div class="blogs">
    {% for blog in blogs %}
    <div class="blogs">
        <h4 class="blogs__username">@{{blog.user.username}} </h4>
        <p class="blog__text"> {{blog.text}} </p>

        <a class="hashtag" href="{{url_for('main.category', category=blog.category)}} ">
            #{{category.category}} </a>

        <div class="blog__votes">
            <form action="/upvote/{{blog.id}}" method="POST">
                <span> {{blog.upvotes|length}} </span>
                <button type="submit" class="btn--upvote">
                    <img class="svg"
                        src="{{url_for('static', filename='img/up-svgrepo-com.svg')}}">
                </button>
            </form>
            <form action="/downvote/{{blog.id}}" method="POST">
                <span>{{blog.downvotes| length}} </span>
                <button type="submit" class="btn--upvote">
                    <img class="svg"
                        src="{{url_for('static', filename='img/arrow-download-svgrepo-com.svg')}}">
                </button>
            </form>
        </div>


        <button class="collapsible">{{blog.comments | length}} Comments</button>

        <div class="content">
            <form action="/create-comment/{{blog.id}}" method="POST">
                <input required type="text" name="text" placeholder="Add comment">
                <button type="submit" class="btn">
                    Add
                </button>

            </form>
            {% for comment in blog.comments %}
            <p>{{comment.user.username}}: {{comment.text}} </p>

            {% endfor %}
        </div>


    </div>
    {% endfor %}

    <script>
        var coll = document.getElementsByClassName("collapsible");
        var i;

        for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function () {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        }
    </script>

</div>


{% endmacro %}